# Generated by Django 3.0.4 on 2020-03-13 12:24

import django.db.models.deletion
import markupfield.fields
from django.conf import settings
from django.db import migrations, models

import weblate_web.models


class Migration(migrations.Migration):
    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name="Image",
            fields=[
                (
                    "id",
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("name", models.CharField(max_length=100, unique=True)),
                (
                    "image",
                    models.ImageField(
                        help_text="Article image, 1200x630 pixels", upload_to="images/"
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="Donation",
            fields=[
                (
                    "id",
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("payment", models.UUIDField(blank=True, null=True)),
                (
                    "link_text",
                    models.CharField(
                        blank=True, max_length=200, verbose_name="Link text"
                    ),
                ),
                ("link_url", models.URLField(blank=True, verbose_name="Link URL")),
                ("created", models.DateTimeField(auto_now_add=True)),
                ("expires", models.DateTimeField()),
                ("active", models.BooleanField(blank=True, db_index=True)),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "link_image",
                    models.ImageField(
                        blank=True, upload_to="donations/", verbose_name="Link image"
                    ),
                ),
                (
                    "reward",
                    models.IntegerField(
                        choices=[
                            (0, "No reward"),
                            (1, "Name in the list of supporters"),
                            (2, "Link in the list of supporters"),
                            (3, "Logo and link on the Weblate website"),
                        ],
                        default=0,
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="Service",
            fields=[
                (
                    "id",
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "secret",
                    models.CharField(
                        db_index=True,
                        default=weblate_web.models.generate_secret,
                        max_length=100,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("community", "Community support"),
                            ("hosted", "Hosted service"),
                            ("basic", "Basic self-hosted support"),
                            ("extended", "Extended self-hosted support"),
                        ],
                        default="community",
                        max_length=150,
                    ),
                ),
                (
                    "backup_repository",
                    models.CharField(blank=True, default="", max_length=500),
                ),
                ("limit_languages", models.IntegerField(default=0)),
                ("limit_source_strings", models.IntegerField(default=0)),
                ("created", models.DateTimeField(auto_now_add=True)),
                ("users", models.ManyToManyField(to=settings.AUTH_USER_MODEL)),
                ("note", models.TextField(blank=True)),
            ],
        ),
        migrations.CreateModel(
            name="Post",
            fields=[
                (
                    "id",
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("title", models.CharField(max_length=100)),
                ("slug", models.SlugField(unique=True)),
                ("timestamp", models.DateTimeField(db_index=True)),
                ("body", markupfield.fields.MarkupField(rendered_field=True)),
                (
                    "body_markup_type",
                    models.CharField(
                        choices=[
                            ("", "--"),
                            ("html", "HTML"),
                            ("plain", "Plain"),
                            ("markdown", "Markdown"),
                        ],
                        default="markdown",
                        max_length=30,
                    ),
                ),
                (
                    "summary",
                    models.TextField(
                        blank=True,
                        help_text="Will be generated from first body paragraph if empty",
                    ),
                ),
                ("_body_rendered", models.TextField(editable=False)),
                (
                    "image",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to="weblate_web.Image",
                    ),
                ),
                (
                    "author",
                    models.ForeignKey(
                        editable=False,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "topic",
                    models.CharField(
                        choices=[
                            ("release", "Release"),
                            ("feature", "Features"),
                            ("announce", "Announcement"),
                            ("conferences", "Conferences"),
                            ("hosting", "Hosted Weblate"),
                            ("development", "Development"),
                            ("localization", "Localization"),
                        ],
                        db_index=True,
                        default="",
                        max_length=100,
                    ),
                ),
                (
                    "milestone",
                    models.BooleanField(
                        blank=True,
                        db_index=True,
                        default=False,
                        help_text="This is an important milestone, shown on milestones archive",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="Subscription",
            fields=[
                (
                    "id",
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("payment", models.UUIDField(blank=True, null=True)),
                ("package", models.CharField(max_length=150)),
                ("created", models.DateTimeField(auto_now_add=True)),
                ("expires", models.DateTimeField()),
                (
                    "service",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        to="weblate_web.Service",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="PastPayments",
            fields=[
                (
                    "id",
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("payment", models.UUIDField()),
                (
                    "subscription",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        to="weblate_web.Subscription",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="Package",
            fields=[
                (
                    "id",
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("name", models.CharField(max_length=150, unique=True)),
                ("verbose", models.CharField(max_length=400)),
                ("price", models.IntegerField()),
                ("limit_languages", models.IntegerField(default=0)),
                ("limit_source_strings", models.IntegerField(default=0)),
            ],
        ),
        migrations.CreateModel(
            name="Report",
            fields=[
                (
                    "id",
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("site_url", models.URLField()),
                ("users", models.IntegerField()),
                ("projects", models.IntegerField()),
                ("components", models.IntegerField()),
                ("languages", models.IntegerField()),
                ("timestamp", models.DateTimeField(auto_now_add=True)),
                ("site_title", models.TextField(default="")),
                ("ssh_key", models.TextField(default="")),
                ("source_strings", models.IntegerField(default=0)),
                (
                    "service",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        to="weblate_web.Service",
                    ),
                ),
                ("version", models.TextField(default="")),
            ],
        ),
    ]
